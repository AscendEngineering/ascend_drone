#go into archives and extract all

for FILE in $(ls archive)
do
    tar -xzf archive/$FILE
done

#raspberry pi specific
sudo apt-get install -y libraspberrypi-dev raspberrypi-kernel-headers
sudo apt-get purge -y wolfram-engine
sudo apt-get purge -y libreoffice*
sudo apt-get clean
sudo apt-get autoremove

#do what we can with apt-get
sudo apt-get update
sudo apt-get install -y autoconf automake cmake libtool curl make g++ unzip vim
sudo apt-get install -y scons
sudo apt-get install -y libtool-bin=2.4.6-9
sudo apt-get install -y xmlto
sudo apt-get install -y libncurses5-dev libncursesw5-dev
sudo apt-get install -y cmake build-essential colordiff git doxygen

#python stuff
pip3 install opencv-python
sudo apt-get install -y libatlas-base-dev
sudo apt-get install -y libjasper-dev
sudo apt-get install -y libqtgui4
sudo apt-get install -y python3-pyqt5
sudo apt-get install -y libqt4-test
sudo apt-get install -y libhdf5-dev
sudo apt-get install -y libhdf5-serial-dev
 
#tunneling for mobile connection
mkdir -p remotit
cd remoteit
curl -LkO https://raw.githubusercontent.com/remoteit/installer/master/scripts/auto-install.sh
chmod +x ./auto-install.sh
sudo ./auto-install.sh
cd ..

#zeromq
cd zeromq-4.3.2
./autogen.sh
./configure
make
sudo make install 
cd ..
  
#cppzmq
cd cppzmq-4.5.0
mkdir -p build
cd build
cmake ..
sudo make -j4 install
cd ../../

#protobuf
cd protobuf-3.11.2
./configure
make
sudo make install
sudo ldconfig 
cd ..

#raspicam
cd raspicam
mkdir build
cd build
cmake ..
make
sudo make install
sudo ldconfig
cd ../..

#mavlink sdk
cd ..
git submodule add https://github.com/mavlink/MAVSDK.git third_party/MAVSDK
cd third_party/MAVSDK
git checkout origin master
git submodule init
git submodule update
cmake -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=ON -Bbuild/default -H.
sudo cmake --build build/default --target install
sudo ldconfig 

#cxx options
cd cxxopts-2.2.0
mkdir build
cd build
cmake ..
make
sudo make install
sudo ldconfig
cd ../..


